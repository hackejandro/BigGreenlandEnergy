<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Geopolitics Expert Flowchart</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.35;background:#0b0c10;color:#e9e9ef;}
    .wrap{max-width:860px;margin:0 auto;padding:24px 16px 40px;}
    header{display:flex;justify-content:space-between;gap:12px;align-items:flex-start;margin-bottom:18px;}
    h1{font-size:20px;margin:0;}
    .sub{color:#a9adbd;font-size:13px;max-width:60ch;}
    .card{border:1px solid rgba(255,255,255,0.12);border-radius:14px;background:rgba(255,255,255,0.03);padding:16px;}
    .q{font-size:18px;font-weight:700;margin:0 0 12px;}
    .answers{display:flex;flex-direction:column;gap:10px;}
    button{appearance:none;border:1px solid rgba(255,255,255,0.14);background:rgba(0,0,0,0.15);color:inherit;border-radius:12px;padding:12px 12px;text-align:left;cursor:pointer;}
    button:hover{border-color:rgba(255,255,255,0.28);}
    .hint{display:block;color:#a9adbd;font-size:12px;margin-top:4px;}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
    .pill{border:1px solid rgba(255,255,255,0.12);border-radius:999px;padding:6px 10px;font-size:12px;color:#a9adbd;background:rgba(255,255,255,0.02);}
    .outcome{margin-top:16px;border-top:1px solid rgba(255,255,255,0.10);padding-top:16px;}
    .out-title{font-size:18px;font-weight:800;margin:0 0 8px;}
    .copy{white-space:pre-wrap;font-size:14px;}
    .tools{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
    .tools button{padding:8px 10px;font-size:12px;border-radius:999px;}
    .small{font-size:12px;color:#a9adbd;margin-top:10px;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Narrative Patsy</h1>
        <div class="sub">Click through a flowchart. You can edit outcome copy in code (see <code>OUTCOME_COPY</code>).</div>
      </div>
      <div class="pill">single file</div>
    </header>

    <div class="card" id="startScreen" style="display:none;">
      <div class="q" style="margin-bottom:10px;">Do you have Big Greenland Energy™ and the one solution to how to deal with Donald Trump's imperial ambitions?</div>
      <div class="copy" style="margin-bottom:12px;">So does everyone! But not as unique as yours, of course.</div>
      <div class="copy" style="margin-bottom:14px;">Finish the flowchart and find out which flavour of armchair diplomat you are!</div>
      <div class="tools">
        <button id="start">Start</button>
      </div>
    </div>

    <div class="card" id="gameCard">
      <div id="question" class="q"></div>
      <div id="answers" class="answers"></div>

      <div class="row" id="path"></div>

      <div class="outcome" id="outcomeBox" style="display:none;">
        <div class="pill" id="outcomeKey"></div>
        <h2 class="out-title" id="outcomeTitle"></h2>
        <div class="copy" id="outcomeCopy"></div>

        <div class="small" style="margin-top:14px;">System note: This solution requires explanation. Explanation requires repetition. Repetition requires Trump.</div>
        <div class="pill" style="margin-top:10px;display:inline-block;">Final status: Narrative Patsy</div>
      </div>

      <div class="tools">
        <button id="restart">Restart</button>
        <button id="back">Back</button>
      </div>
    </div>

    <div class="small">Editing: change the strings in <code>OUTCOME_COPY</code>. Change the flow in <code>NODES</code>.</div>
  </div>

  <script>
    // ------------------------------------------------------------
    // Edit me: outcome screen copy
    // ------------------------------------------------------------
    const OUTCOME_COPY = {
      "Sanctions Maximalism": {
        title: "Sanctions Maximalism",
        copy: `Maximum pressure.

Make the costs visible.
Make the target explicit.
Say the name.`
      },
      "Targeted Sanctions Realism": {
        title: "Targeted Sanctions Realism",
        copy: `Targeted lists. Narrow pain.

Explain who and why.
Say the name.`
      },
      "Trade Retaliation": {
        title: "Trade Retaliation",
        copy: `Tariffs, counter-tariffs, leverage.

Explain it on TV.
Say the name.`
      },
      "Anti-Coercion Instrument": {
        title: "Anti-Coercion Instrument",
        copy: `Use the EU tool.

Announce it.
Brief it.
Say the name.`
      },
      "NATO Expansion Logic": {
        title: "NATO Expansion Logic",
        copy: `Make it security.

Press conference required.
Say the name.`
      },
      "Joint Defence Proposal": {
        title: "Joint Defence Proposal",
        copy: `Shared posture, shared patrols.

Explained as deterrence.
Say the name.`
      },
      "Military Deterrence (Implicit)": {
        title: "Military Deterrence (Implicit)",
        copy: `Signals without saying “war”.

Everyone hears it anyway.
Say the name.`
      },
      "International Law Invocation": {
        title: "International Law Invocation",
        copy: `Treaties. Norms. Jurisdiction.

Explained in interviews.
Say the name.`
      },
      "Multilateralisation": {
        title: "Multilateralisation",
        copy: `Move it into a room with flags.

The microphones follow.
Say the name.`
      },
      "Procedural Delay": {
        title: "Procedural Delay",
        copy: `Assess. Consult. Review.

Explain the timeline.
Say the name.`
      },
      "New Framework Creation": {
        title: "New Framework Creation",
        copy: `Create a mechanism.

Launch it publicly.
Say the name.`
      },
      "Quiet Diplomacy": {
        title: "Quiet Diplomacy",
        copy: `Talk off-camera.

Then explain why you can’t say more.
Say the name.`
      },
      "Strategic Ambiguity": {
        title: "Strategic Ambiguity",
        copy: `Say less. Mean more.

Then do a Q&A.
Say the name.`
      },
      "Transactional Bargaining": {
        title: "Transactional Bargaining",
        copy: `Trade something for something.

Explain the trade.
Say the name.`
      },
      "Grand Bargain": {
        title: "Grand Bargain",
        copy: `Bundle it all.

Sell the package.
Say the name.`
      },
      "De-escalation First": {
        title: "De-escalation First",
        copy: `Lower the temperature.

Explain the tone.
Say the name.`
      },
      "Democratic Deliberation": {
        title: "Democratic Deliberation",
        copy: `Debate it properly.

Stream it. Clip it.
Say the name.`
      },
      "Greenland Self-Determination": {
        title: "Greenland Self-Determination",
        copy: `Put Greenland in the centre.

Explain that choice.
Say the name.`
      },
      "Values-Based Response": {
        title: "Values-Based Response",
        copy: `Act like Europe.

Define the values.
Say the name.`
      },
      "Norm-Setting": {
        title: "Norm-Setting",
        copy: `Set precedent.

Explain the lesson.
Say the name.`
      },
      "Ignore It": {
        title: "Ignore It",
        copy: `Don’t feed it.

But you still have to explain why you didn’t respond.
Say the name.`
      },
      "Wait It Out": {
        title: "Wait It Out",
        copy: `Do nothing, strategically.

Explain the waiting.
Say the name.`
      },
      "Reframe the Issue": {
        title: "Reframe the Issue",
        copy: `This isn’t about Greenland.

Explain what it’s “really” about.
Say the name.`
      },
      "Out-Message It": {
        title: "Out-Message It",
        copy: `Better comms. Better framing.

More content. More mentions.
Say the name.`
      }
    };

    // ------------------------------------------------------------
    // Edit me: flowchart nodes
    // Each node: { question, answers: [{ label, hint, next } or { label, hint, outcome }] }
    // ------------------------------------------------------------
    const NODES = {
      Q1: {
        question: "Should Europe respond at all?",
        answers: [
          { label: "No", hint: "starve it", outcome: "Ignore It" },
          { label: "Yes", hint: "do something", next: "Q2" }
        ]
      },
      Q2: {
        question: "Is time itself the strategy?",
        answers: [
          { label: "Yes", hint: "wait", outcome: "Wait It Out" },
          { label: "No", hint: "now", next: "Q3" }
        ]
      },
      Q3: {
        question: "Should the response impose costs?",
        answers: [
          { label: "Yes", hint: "make it hurt", next: "Q4" },
          { label: "No", hint: "no punishment", next: "Q10" }
        ]
      },
      Q4: {
        question: "What kind of costs?",
        answers: [
          { label: "Economic", hint: "money, trade", next: "Q5" },
          { label: "Security", hint: "deterrence", next: "Q7" },
          { label: "Political", hint: "norms or messaging", next: "Q9" }
        ]
      },
      Q5: {
        question: "Trade or sanctions?",
        answers: [
          { label: "Trade", hint: "tariffs", outcome: "Trade Retaliation" },
          { label: "Sanctions", hint: "lists", next: "Q6" }
        ]
      },
      Q6: {
        question: "Broad or targeted?",
        answers: [
          { label: "Broad", hint: "max pressure", outcome: "Sanctions Maximalism" },
          { label: "Targeted", hint: "smart sanctions", outcome: "Targeted Sanctions Realism" }
        ]
      },
      Q7: {
        question: "Through existing security structures?",
        answers: [
          { label: "Yes", hint: "use what exists", next: "Q8" },
          { label: "No", hint: "signal anyway", outcome: "Military Deterrence (Implicit)" }
        ]
      },
      Q8: {
        question: "Specifically NATO?",
        answers: [
          { label: "Yes", hint: "Article-shaped", outcome: "NATO Expansion Logic" },
          { label: "No", hint: "coalition", outcome: "Joint Defence Proposal" }
        ]
      },
      Q9: {
        question: "Political cost by norms or by messaging?",
        answers: [
          { label: "Norms", hint: "set precedent", outcome: "Norm-Setting" },
          { label: "Messaging", hint: "win attention", outcome: "Out-Message It" }
        ]
      },
      Q10: {
        question: "Should institutions take the lead?",
        answers: [
          { label: "Yes", hint: "process", next: "Q11" },
          { label: "No", hint: "politics", next: "Q14" }
        ]
      },
      Q11: {
        question: "Existing tools or new ones?",
        answers: [
          { label: "Existing", hint: "already on the shelf", next: "Q12" },
          { label: "New", hint: "invent", outcome: "New Framework Creation" }
        ]
      },
      Q12: {
        question: "Economic or legal instrument?",
        answers: [
          { label: "Economic", hint: "anti-coercion", outcome: "Anti-Coercion Instrument" },
          { label: "Legal", hint: "rules", next: "Q12b" }
        ]
      },
      Q12b: {
        question: "Law or multilateral forum?",
        answers: [
          { label: "Law", hint: "treaties", outcome: "International Law Invocation" },
          { label: "Forum", hint: "UN/WTO/etc", outcome: "Multilateralisation" }
        ]
      },
      Q14: {
        question: "Diplomatic or political?",
        answers: [
          { label: "Diplomatic", hint: "talk first", next: "Q15" },
          { label: "Political", hint: "deal logic", next: "Q17" }
        ]
      },
      Q15: {
        question: "Public or quiet?",
        answers: [
          { label: "Quiet", hint: "back channels", outcome: "Quiet Diplomacy" },
          { label: "Public", hint: "say less", outcome: "Strategic Ambiguity" }
        ]
      },
      Q17: {
        question: "Is there something to trade?",
        answers: [
          { label: "Yes", hint: "swap concessions", next: "Q18" },
          { label: "No", hint: "process", next: "Q20" }
        ]
      },
      Q18: {
        question: "Small deal or big deal?",
        answers: [
          { label: "Small", hint: "one issue", outcome: "Transactional Bargaining" },
          { label: "Big", hint: "package", outcome: "Grand Bargain" }
        ]
      },
      Q20: {
        question: "Should democratic process be central?",
        answers: [
          { label: "Yes", hint: "legitimacy", next: "Q21" },
          { label: "No", hint: "tone/identity/frame", next: "Q23" }
        ]
      },
      Q21: {
        question: "Whose democracy?",
        answers: [
          { label: "Greenland", hint: "self-determination", outcome: "Greenland Self-Determination" },
          { label: "Europe", hint: "deliberation", outcome: "Democratic Deliberation" }
        ]
      },
      Q23: {
        question: "Which non-cost move?",
        answers: [
          { label: "Values", hint: "who we are", outcome: "Values-Based Response" },
          { label: "De-escalate", hint: "cool it", outcome: "De-escalation First" },
          { label: "Reframe", hint: "change the frame", outcome: "Reframe the Issue" },
          { label: "Delay", hint: "slow it down", outcome: "Procedural Delay" }
        ]
      }
    };

    // ------------------------------------------------------------
    // App state
    // ------------------------------------------------------------
    let started = false;
    let nodeId = "Q1";
    let history = []; // stack of { nodeId, pickedLabel }
    let outcome = null;

    const $startScreen = document.getElementById("startScreen");
    const $gameCard = document.getElementById("gameCard");
    const $startBtn = document.getElementById("start");

    const $question = document.getElementById("question");
    const $answers = document.getElementById("answers");
    const $path = document.getElementById("path");
    const $outcomeBox = document.getElementById("outcomeBox");
    const $outcomeKey = document.getElementById("outcomeKey");
    const $outcomeTitle = document.getElementById("outcomeTitle");
    const $outcomeCopy = document.getElementById("outcomeCopy");

    function render(){
      // Start screen
      if(!started){
        $startScreen.style.display = "block";
        $gameCard.style.display = "none";
        return;
      }
      $startScreen.style.display = "none";
      $gameCard.style.display = "block";

      // Path pills
      $path.innerHTML = "";
      history.forEach(h => {
        const p = document.createElement("div");
        p.className = "pill";
        p.textContent = h.pickedLabel;
        $path.appendChild(p);
      });

      if(outcome){
        $question.textContent = "Complete.";
        $answers.innerHTML = "";
        $outcomeBox.style.display = "block";
        $outcomeKey.textContent = outcome;
        $outcomeTitle.textContent = (OUTCOME_COPY[outcome]?.title) || outcome;
        $outcomeCopy.textContent = (OUTCOME_COPY[outcome]?.copy) || "";
        return;
      }

      const node = NODES[nodeId];
      $question.textContent = node.question;
      $answers.innerHTML = "";
      $outcomeBox.style.display = "none";

      node.answers.forEach(ans => {
        const b = document.createElement("button");
        b.innerHTML = `${ans.label}${ans.hint ? `<span class=\"hint\">${ans.hint}</span>` : ""}`;
        b.addEventListener("click", () => pick(ans));
        $answers.appendChild(b);
      });
    }

    function pick(ans){
      history.push({ nodeId, pickedLabel: ans.label });
      if(ans.outcome){
        outcome = ans.outcome;
      } else {
        nodeId = ans.next;
      }
      render();
    }

    function startGame(){
      started = true;
      nodeId = "Q1";
      history = [];
      outcome = null;
      render();
    }

    function restart(){
      started = true;
      nodeId = "Q1";
      history = [];
      outcome = null;
      render();
    }

    function back(){
      if(outcome){
        outcome = null;
      }
      const prev = history.pop();
      if(!prev){
        restart();
        return;
      }
      nodeId = prev.nodeId;
      render();
    }

    $startBtn.addEventListener("click", startGame);

    document.getElementById("restart").addEventListener("click", restart);
    document.getElementById("back").addEventListener("click", back);

    render();
  </script>
</body>
</html>
